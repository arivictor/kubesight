{% extends "base.html" %}

{% block title %}KubeSight - Dashboard{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- HATEOAS Navigation Actions -->
    {% if nav_actions %}
        <div class="nav-actions">
            {% for action in nav_actions %}
                <a href="{{ action.href }}" class="btn btn-{{ action.style }}" title="{{ action.description }}">
                    {{ action.label }}
                </a>
            {% endfor %}
        </div>
    {% endif %}
    
    <div class="controls">
        <div class="control-group">
            <label for="namespaceSelect">Namespace:</label>
            <select name="namespace" id="namespaceSelect" 
                    hx-get="{{ api_endpoints.namespaces }}"
                    hx-trigger="load"
                    hx-target="#namespaceSelect"
                    hx-swap="innerHTML"
                    hx-on::after-swap="htmx.trigger('#pods-table', 'refresh-pods')">
                <option value="">Loading...</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="search-input">Search:</label>
            <input type="text" 
                   id="search-input" 
                   name="search" 
                   placeholder="Search pods..."
                   hx-get="{{ api_endpoints.pods }}" 
                   hx-trigger="keyup changed delay:500ms" 
                   hx-target="#pods-table"
                   hx-include="[name='namespace']">
        </div>
    </div>
    
    <div id="pods-table"
         hx-get="{{ api_endpoints.pods }}" 
         hx-trigger="change from:#namespaceSelect, refresh-pods"
         hx-include="[name='namespace'],[name='search']"
         hx-indicator=".refresh-indicator">
        <div class="loading">Loading pods...</div>
    </div>
</div>


{% endblock %}
