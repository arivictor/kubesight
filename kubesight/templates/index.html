{% extends "base.html" %}

{% block title %}KubeSight - Dashboard{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="controls">
        <div class="control-group">
            <label for="namespace-select">Namespace:</label>
            <select id="namespace-select" name="namespace"
                    hx-get="/api/pods" 
                    hx-target="#pods-table" 
                    hx-include="[name='search']"
                    hx-trigger="load from:body, change">
                <option value="default">default</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="search-input">Search:</label>
            <input type="text" 
                   id="search-input" 
                   name="search" 
                   placeholder="Search pods..."
                   hx-get="/api/pods" 
                   hx-trigger="keyup changed delay:500ms" 
                   hx-target="#pods-table"
                   hx-include="[name='namespace']">
        </div>
        
        <div class="control-group">
            <button class="btn btn-primary" 
                    hx-get="/api/pods" 
                    hx-target="#pods-table"
                    hx-include="[name='namespace'],[name='search']">
                ðŸ”„ Refresh
            </button>
        </div>
    </div>
    
    <div id="pods-table"
         hx-get="/api/pods?namespace=default" 
         hx-trigger="load">
        <div class="loading">Loading pods...</div>
    </div>
    
    <div id="pod-modal" class="modal"></div>
</div>

<script>
// Load namespaces using HTMX
htmx.ajax('GET', '/api/namespaces', {
    target: '#namespace-select',
    swap: 'innerHTML'
});
</script>
{% endblock %}
